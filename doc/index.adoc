= Tensei-Data User Guide
Contributors as noted in the AUTHORS.md file.
:doctype: book
:toc: left
:toclevels: 4
:numbered:
:icons: font
:imagesdir: images
:source-highlighter: coderay
:Revision: {project-version}
//:stylesheet: stylesheets/rocket-panda.css

[[preamble]]
== Preamble ==
This guide is intended for users that want to understand, install and
use the Tensei-Data system. It is also feasible for administrators
that strive for a better understanding of the system components.

Version:: {project-version}

[source,plain]
----
Copyright (c) 2014 - 2017 Contributors as noted in the AUTHORS.md file

The Tensei-Data user guide is distributed under the terms of the 
Creative Commons Attribution-ShareAlike 4.0 International license 
(CC BY-SA 4.0).
----

=== Authors ===
The following authors contributed to this guide:

[source, plain]
----
include::../AUTHORS.md[]
----

=== Contributing ===
If you want to contribute to the project, you should follow the
following Contribution Guide that has been adopted.

[source, play]
----
include::../CONTRIBUTING.md[]
----

[[overview]]
== Overview ==

The Tensei-Data software system can be used to merge, standardize and
simplify data integration, data migration, data transformation and
interface management processes.

These processes can be manually executed or automatically by specified
routines or triggers that are monitored.

The system is based on modern technologies like _Akka_, _Scala_ and the
_Play Framework_. Therefore, the application is scalable, flexible and highly
performant.
The integrated Data Description Language (_DFASDL_) allows the dynamic
mapping of almost any source and target system and is called within the
application as `dynamic connectors`.

For the modification of data, the Tensei-Data application offers diverse
`transformers` which can be combined and modified.

[[overview-features]]
=== Features ===

*Key features of the Tensei-Data system are:*

Dynamic Connectors:: The structures of the source and the target system
can automatically be retrieved and expressed via the integrated Data
Description Language (DFASDL). That allows the connection of
standardized and individual resources.
Referential Integrity:: Existing dependencies (Primary keys, Foreign
Keys) between the data are automatically considered and integrated into
the target system. That preserves the correctness of the referential
integrity when depending keys are changing.
Normalization:: Normalization allows the extraction of data from the
source system and avoids redundancies in the target system. Tensei-Data
extracts the data depending on the specifications and provides the
created dependencies for the linking of the dependent data.
Virutal Views:: Tensei-Data allows the creation of virtual views on the
existing data which create new relations and aggregations.
Transformers:: A row of basic transformers are already included in the
Tensei-Data system to modify the data in diverse ways. Multiple
transformers can be connected in series to execute various modifications
on the data. This flexibility enables endless ways to transform data
regarding diverse use cases.
Automatic Execution:: The execution of the integration and
transformation processes can be established continuously or manually.
For the continuous execution are Cronjobs (time-based execution) or
Trigger (event-based execution) available.
Scalable:: The system is based on a modern software stack of Scala and
Akka. The advantages of this agent based system are scalability by the
Akka cluster and parallelization that can be upscaled depending on the
number of available agents.
Diverse database systems and file types:: Tensei-Data supports various
<<overview-connections,databases and file types>> and provides connection out
of the box.

_Additional features are_:

* Automatic description of the data structure
* Complex integration tasks can be subdivided into subtasks and automatically
executed
* Besides the graphical frontend exists an admin mode that allows the 
specification of database dependent queries
* Filtering of data
* Export / Import of existing cookbooks for reuse
* Intuitive mapping visualization
* Extreme short training periods

[[overview-objectives]]
=== Objectives ===

The Tensei-Data application is designed with the following objectives in
mind:

* Integrate, migrate and transform data with ease

* One platform for all data transformation and integration processes

* Reduce errors during system setup

* Easy adaptation of the application to new requirements

* Scalability

* Reusability

* Minimal training periods

[[overview-connections]]
=== Database and file type connections out of the box ===

|===
|Databases | Files | File access

|Derby
|Text
|Local

|H2
|CSV
|Http

|HypeSQL
|XML
|FTP

|Firebird
|Excel
|FTPS

|MariaDB
|JSON
|SFTP

|Microsoft SQL Server
|Email
|

|MySQL
|TSV
|

|Oracle
|
|

|PostgreSQL
|
|

|SQLite
|
|

|others (via JDBC)
|
|
|===

[[overview-structure]]
=== Structure and Components ===

Tensei-Data is designed as microservice application structure and
consists of the following components:

Frontend:: Administer the Transformation Configurations for executing
the integration and transformation processes. The graphical editor
allows the definition and adaptation of all process relevant steps.

Server:: Administer the connection between the frontend and the
registered agents.

Agent:: Agents are the workhorse of the Tensei-Data system and finally
execute the Transformation Configurations.

[[installation]]
== Installation ==

The installation of the Tensei-Data system can be done by using a
<<installation-vm-windows,Virtual Machine for Windows>>, a
<<installation-vm-linux,Virtual Machine for Linux>> or the
installation of <<installation-debian-packages,Debian packages>>.

[[installation-vm]]
=== VM ===

The minimum requirements for the Virtual Machine are as follows:

.System requirements for the Virtual Machine installation
|========================================================
| CPU | 4 cores or more
| RAM | 3 gb memory or more
| HDD | sufficient space on hard disk (at least 12 gb) 
| VirtualBox | The virtualisation software VirtualBox
footnoteref:[virtualbox, VirtualBox Homepage:
https://www.virtualbox.org/] needs to be installed.
| Vagrant | Vagrant footnoteref:[vagrant, Vagrant Homepage: https://www.vagrantup.com/]
needs to be installed.
| SSH | Alternatively Git footnoteref:[Git, Git Hompeage: https://git-scm.com/]
|========================================================

[[installation-vm-windows]]
==== Windows ====

The following steps describe the installation of the required components to
execute the Tensei-Data system.

===== Installation of VirtualBox =====
VirtualBox is a virtualization software that is available for various systems.

. Download the `Windows Installer` from https://www.virtualbox.org/
. Execute the `Installer` and follow the instructions

===== Installation of Vagrant =====
Vagrant is used to create the system that executes the Tensei-Data components.

. Download the `Windows Installer` from https://www.vagrantup.com/
. Execute the `Installer` and follow the instructions

TIP: The system must be rebooted after installing Vagrant.

===== Installation of the Tensei-Data Demobox =====

1. Create an empty folder.
2. Open a command prompt in the created folder.
3. Enter the command `vagrant init wegtam/tensei-demo` at command prompt.

To start the demo version a command prompt has to be opened in the created·
directory. At the prompt the following command starts the demo version:

[source]
----
vagrant up
----

image::windows_eingabeaufforderung_vagrant_up.png[scaledwidth=100%,align="center"]

* The first start of the system takes a while.

* You can access the system at http://localhost:9000

image::windows_localhost_9000.png[scaledwidth=100%,align="center"]

* You can stop the system with
[source]
----
vagrant halt
----

* If you have problems during the start, you have to start the processes by
  hand: <<installation-faq>>

* The demo is installed and can be restarted with `vagrant up`

[[installation-vm-linux]]
==== Linux ====

1. Create an empty folder.
2. Open a command prompt in the created folder.
3. Enter the command `vagrant init wegtam/tensei-demo` at command prompt.

To start the demo version a command prompt has to be opened in the created·
directory. At the prompt the following command starts the demo version:

[source]
----
vagrant up
----

After the VM has started the application, the frontend is available under the
following address: http://localhost:9000

The first booting of the virtual machine may take longer because the vagrant
box must be decompressed and installed.

IMPORTANT: If the following error message `Server connection unavailable`
appears on the screen, the services must be started manually.
<<installation-faq-services>>

The VM can be shutdown via `vagrant halt` or via `vagrant suspend`. To
boot it again just use the `vagrant up` command.

The virtual machine will not shutdown automatically with the shutdown of the
host system. The VM may be damaged if it is not shutdown properly.

* If you have problems during the start, you have to start the processes
  by hand: <<installation-faq>>

[[installation-debian-packages]]
=== Debian packages ===

*TODO*

[[installation-faq]]
=== FAQ Installation ===

[[installation-faq-ssh-support]]
==== Installation of SSH support for Windows ====
If no SSH support is available on your Windows system, you can install Git as
one alternative.

. Download the `Windows Installer` from https://git-scm.com/
. Execute the `Installer` and follow the instructions

SSH is neccessary to execute the `vagrant ssh` command

[[installation-faq-reload]]
==== The system is not correctly loaded by vagrant ====
If the system does not run correctly after the first `vagrant up`, you should
reload the system.

.Reload the system
[source,bash]
----
% vagrant reload
----

[[installation-faq-services]]
==== Services do not start ====
In rare circumstances some services (frontend, server, agent) may not be started
correctly for example the tensei-server or the tensei-agent.

Sometimes it is enough to <<installation-faq-reload,reload the VM>>. If not, the 
following steps can be executed.

To resolve this issue you should login to the virtual machine using the
`vagrant ssh` command. From within the VM you can restart the services:

.Connect to VM from Shell
[source,bash]
----
% vagrant ssh
----

.Restart server
[source,bash]
----
% sudo service tensei-server restart
----

.Restart agent
[source,bash]
----
% sudo service tensei-agent restart
----

.Restart frontend
[source,bash]
----
% sudo service tensei-frontend restart
----

If it generates an error message during the restart of one of the services
(because the service is not running), this service can be started with one of
the following commands.

.Start the server
[source,bash]
----
% sudo service tensei-server start
----

.Start the agent
[source,bash]
----
% sudo service tensei-agent start
----

.Start the frontend
[source,bash]
----
% sudo service tensei-frontend start
----

[[installation-faq-frontend-restart]]
==== Frontend doesn't run and can not be restarted ====

If the VM was incorrectly stopped, the frontend service can be corrupted.
The service can not be restarted.

If so, you have to delete the `RUNNING_PID` file within the frontend folder.

.Connect to the VM in the shell
[source,bash]
----
% vagrant ssh
----

.Delete the RUNNING_PID file
[source,bash]
----
% rm /srv/tensei/tensei-frontend/RUNNING_PID
----

Restart the frontend service.

.Restart frontend
[source,bash]
----
% sudo service tensei-frontend restart
----

[[installation-replace]]
=== Replace an existing Vagrant-Box ===
If you want to replace an existing Vagrant-Box, you must execute the following
steps.

IMPORTANT: If you want to keep existing Cookbooks, you must export them.

. Switch to the folder where the actual Vagrant-Box is installed
. You can see the status of the box with `vagrant status`
. Destroy the box with `vagrant destroy`
. List the added boxes with `vagrant box list`
. Delete the actual Vagrant-Box with `vagrant box remove NAME-OF-THE-BOX`
.. If the box has the name `tensei-demo`, the box can be removed with the
following line: `vagrant box remove tensei-demo`
. Install the new box like described in the <<installation>>.

[[installation-uninstall]]
=== Uninstall ===
For a properly uninstallation of the application the command `vagrant destroy`
has to be executed. Afterwards the working directory may be deleted.

TIP: In `C:\Users\<username>.vagrant.d\boxes\` (Windows) or
`/home/<username>/.vagrant.d/boxes/` (Linux), a copy of the VM is stored that
can be removed manually.

[[frontend]]
== Frontend ==

*TODO*

[[frontend-overview]]
=== Overview ===

*TODO*

=== Structure ===

*TODO*

=== Functionalities ===

*TODO*

=== First access ===

*TODO*

=== Login ===

*TODO*

=== License ===

*TODO*

=== Best practice ===

*TODO*

=== Dashboard ===

*TODO*

=== DFASDL ===

*TODO*

=== Cookbook ===

*TODO*

=== Connection Information (CI) ===

*TODO*

=== Transformation Configuration (TK) ===

*TODO*

==== Execute Transformation Configuration ====

*TODO*

=== Agent ===

*TODO*

==== Queue ====

*TODO*

=== Services ===

*TODO*

==== Cronjob ====

*TODO*

==== Trigger ====

*TODO*

=== Administrator ===

*TODO*

=== Profile ===

*TODO*

=== Use Cases ===

*TODO*

